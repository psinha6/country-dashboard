<div class="container">
  <mat-spinner *ngIf="store.loading()" diameter="50"></mat-spinner>
  
  <div *ngIf="store.error()" class="error-message">
    {{ store.error() }}
  </div>

  <div class="table-container">
    <table mat-table [dataSource]="store.countries()" class="mat-elevation-z8">
      <!-- Flag Column -->
      <ng-container matColumnDef="flag">
        <th mat-header-cell *matHeaderCellDef>Flag</th>
        <td mat-cell *matCellDef="let country">
          <img [src]="country.flags.png" [alt]="country.name.common + ' flag'" class="flag-img">
        </td>
      </ng-container>

      <!-- Name Column -->
      <ng-container matColumnDef="name">
        <th mat-header-cell *matHeaderCellDef>Name</th>
        <td mat-cell *matCellDef="let country">{{ country.name.common }}</td>
      </ng-container>

      <!-- Capital Column -->
      <ng-container matColumnDef="capital">
        <th mat-header-cell *matHeaderCellDef>Capital</th>
        <td mat-cell *matCellDef="let country">{{ country.capital?.join(', ') || 'N/A' }}</td>
      </ng-container>

      <!-- Region Column -->
      <ng-container matColumnDef="region">
        <th mat-header-cell *matHeaderCellDef>Region</th>
        <td mat-cell *matCellDef="let country">{{ country.region }}</td>
      </ng-container>

      <!-- Population Column -->
      <ng-container matColumnDef="population">
        <th mat-header-cell *matHeaderCellDef>Population</th>
        <td mat-cell *matCellDef="let country">{{ country.population | number }}</td>
      </ng-container>

      <!-- Languages Column -->
      <ng-container matColumnDef="languages">
        <th mat-header-cell *matHeaderCellDef>Languages</th>
        <td mat-cell *matCellDef="let country">{{ getLanguages(country.languages) }}</td>
      </ng-container>

      <!-- Currencies Column -->
      <ng-container matColumnDef="currencies">
        <th mat-header-cell *matHeaderCellDef>Currencies</th>
        <td mat-cell *matCellDef="let country">{{ getCurrencies(country.currencies) }}</td>
      </ng-container>

      <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
      <tr mat-row *matRowDef="let row; columns: displayedColumns;" 
          (click)="onRowClick(row)"
          class="clickable-row"></tr>
    </table>

    <mat-spinner *ngIf="store.loading()" diameter="50" class="spinner"></mat-spinner>
  </div>
</div> 